<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Random Player Selector</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0A0A1A;
  --cyan:#00F6FF;
  --yellow:#FFD60A;
  --pink:#FF2FC7;
  --white:#F7F7F2;
  --green:#2DFF7A;
}

*{box-sizing:border-box;margin:0;padding:0;}

html,body{
  height:100%;
  background:var(--bg);
  color:var(--white);
  font-family:'Press Start 2P', monospace;
}

body{
  display:flex;
  align-items:center;
  justify-content:center;
}

button{
  font-family:'Press Start 2P', monospace;
  font-size:11px;
  padding:14px 20px;
  background:transparent;
  color:var(--cyan);
  border:4px solid var(--cyan);
  cursor:pointer;
}

button:disabled{
  opacity:0.4;
  cursor:not-allowed;
}

.main-btn{
  font-size:12px;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(10,10,26,0.96);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}

.modal{
  width:92%;
  max-width:960px;
  text-align:center;
}

.top-player{
  border:6px solid var(--yellow);
  padding:16px;
  font-size:18px;
  margin-bottom:12px;
  text-shadow:0 0 12px var(--yellow);
}

.subtitle{
  font-size:10px;
  margin-bottom:18px;
  color:var(--yellow);
}

.actions{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:6px;
  margin-bottom:20px;
}

.player-box{
  border:2px solid rgba(0,246,255,0.2);
  padding:10px 4px;
  font-size:9px;
  text-align:center;
  transition:all .12s;
}

.player-box.active{
  text-shadow:0 0 8px currentColor;
}

.player-box.selected{
  border-color:var(--yellow);
  color:var(--yellow);
  text-shadow:0 0 10px var(--yellow);
}

.info{
  font-size:9px;
  margin-top:14px;
  color:var(--pink);
}

.success{
  display:none;
  font-size:14px;
  color:var(--yellow);
  text-shadow:0 0 12px var(--yellow);
}

/* Screen shake */
.shake{
  animation:shake 0.35s;
}

@keyframes shake{
  0%,100%{transform:translate(0,0);}
  20%{transform:translate(-6px,0);}
  40%{transform:translate(6px,0);}
  60%{transform:translate(-4px,0);}
  80%{transform:translate(4px,0);}
}
</style>
</head>

<body>

<button class="main-btn" id="openBtn">
  RANDOM PLAYER SELECTOR & SUBMIT
</button>

<div class="overlay" id="overlay">
  <div class="modal">

    <div class="top-player" id="topPlayer"></div>
    <div class="subtitle">is your random player. Do you want to</div>

    <div class="actions">
      <button id="stickBtn">STICK (AND SUBMIT)</button>
      <button id="twistBtn">TWIST (2 REMAINING)</button>
    </div>

    <div class="grid" id="grid"></div>

    <div class="info" id="info"></div>
    <div class="success" id="success">PICKS SUBMITTED!</div>

  </div>
</div>

<script>
'use strict';

const PLAYERS = [
  'MESSI','RONALDO','MBAPPÉ','HAALAND','SALAH',
  'KANE','NEYMAR','BENZEMA','MODRIĆ','DE BRUYNE',
  'VINÍCIUS','PEDRI','GRIEZMANN','BELLINGHAM',
  'LEWANDOWSKI','SON','OSIMHEN','SAKA',
  'RASHFORD','ALVAREZ',
  'GREALISH','FODEN','ØDEGAARD','MUSIALA',
  'KVARA','VALVERDE','DIMARIA','LUKAKU',
  'DAVIES','RODRI'
];

const NEON_COLORS = [
  '#00F6FF',
  '#FF2FC7',
  '#FFD60A',
  '#2DFF7A',
  '#FFFFFF'
];

let twistsRemaining = 2;
let finalPlayer = null;
let finalIndex = null;
let locked = false;

const openBtn = document.getElementById('openBtn');
const overlay = document.getElementById('overlay');
const gridEl = document.getElementById('grid');
const topPlayerEl = document.getElementById('topPlayer');
const stickBtn = document.getElementById('stickBtn');
const twistBtn = document.getElementById('twistBtn');
const infoEl = document.getElementById('info');
const successEl = document.getElementById('success');

openBtn.addEventListener('click', init);

function init(){
  overlay.style.display = 'flex';
  gridEl.innerHTML = '';
  successEl.style.display = 'none';
  infoEl.textContent = '';
  twistsRemaining = 2;
  locked = false;

  PLAYERS.forEach(name=>{
    const d=document.createElement('div');
    d.className='player-box';
    d.textContent=name;
    gridEl.appendChild(d);
  });

  finalIndex = Math.floor(Math.random()*PLAYERS.length);
  finalPlayer = PLAYERS[finalIndex];
  updateTop(finalPlayer);
  updateTwistText();
}

function randomNeon(){
  return NEON_COLORS[Math.floor(Math.random()*NEON_COLORS.length)];
}

function updateTop(name){
  topPlayerEl.textContent = name;
}

function updateTwistText(){
  twistBtn.textContent = `TWIST (${twistsRemaining} REMAINING)`;
}

// Countdown helper
function countdownThen(callback){
  const messages=['READY','SET','TWIST!'];
  let i=0;
  const interval=setInterval(()=>{
    topPlayerEl.textContent=messages[i];
    i++;
    if(i>=messages.length){
      clearInterval(interval);
      callback();
    }
  },200);
}

stickBtn.addEventListener('click', ()=>{
  if(locked) return;
  locked = true;
  freezeFrame();
  successEl.style.display='block';
  infoEl.textContent = `FINAL PLAYER: ${finalPlayer}`;
});

twistBtn.addEventListener('click', ()=>{
  if(locked || twistsRemaining===0) return;

  twistsRemaining--;
  updateTwistText();

  finalIndex = Math.floor(Math.random()*PLAYERS.length);
  finalPlayer = PLAYERS[finalIndex];

  countdownThen(()=>{
    runTwistAnimation(()=>{
      updateTop(finalPlayer);
      if(twistsRemaining===0){
        locked = true;
        infoEl.textContent = 'FINAL PLAYER LOCKED';
        freezeFrame();
      }
    });
  });
});

function runTwistAnimation(done){
  const boxes=[...document.querySelectorAll('.player-box')];
  let index=0;
  let cycles=0;

  boxes.forEach(b=>{
    b.classList.remove('active','selected');
    b.style.color='';
    b.style.borderColor='';
  });

  const interval=setInterval(()=>{
    boxes.forEach(b=>{
      b.classList.remove('active');
      b.style.color='';
      b.style.borderColor='';
    });

    const color=randomNeon();
    boxes[index].classList.add('active');
    boxes[index].style.color=color;
    boxes[index].style.borderColor=color;

    if(index===finalIndex && cycles>=2){
      clearInterval(interval);
      boxes[index].classList.remove('active');
      boxes[index].classList.add('selected');
      boxes[index].style.color='var(--yellow)';
      boxes[index].style.borderColor='var(--yellow)';
      done();
      return;
    }

    index=(index+1)%boxes.length;
    if(index===0) cycles++;
  },70);
}

// Freeze-frame + screen shake
function freezeFrame(){
  const boxes=[...document.querySelectorAll('.player-box')];
  const idx=PLAYERS.indexOf(finalPlayer);
  boxes.forEach(b=>{
    if(PLAYERS.indexOf(b.textContent)===idx){
      b.classList.add('selected');
      b.style.color='var(--yellow)';
      b.style.borderColor='var(--yellow)';
    } else {
      b.classList.remove('active','selected');
      b.style.color='';
      b.style.borderColor='';
    }
  });

  topPlayerEl.classList.add('shake');
  setTimeout(()=>topPlayerEl.classList.remove('shake'),350);
}
</script>

</body>
</html>
