<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>GOALSTORM! ‚Äî WORLD CUP 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<style>
/* 1. CALMER PALETTE */
:root{
  --bg:#080808;
  --panel:#111; 
  --border: #333;
  --neon:#2dd4bf; /* Softer Teal */
  --neon-dim: rgba(45, 212, 191, 0.2);
  --error:#fb7185; /* Soft Red */
  --text-main: #e2e8f0;
  --text-dim: #64748b;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
    margin:0;
    background-color: var(--bg);
    color: var(--text-main);
    font-family:"VT323", monospace;
    font-size: 20px; 
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height: 100vh;
}

/* NAV - CLEANER LOOK */
.nav {
  width: 100%;
  max-width: 960px;
  display: flex;
  justify-content: space-around;
  margin: 20px auto 10px;
  padding: 0 10px;
  gap: 6px;
}
.nav a {
  flex: 1;
  font-family: "Press Start 2P", cursive;
  font-size: 10px;
  padding: 12px 4px;
  color: var(--text-dim);
  text-decoration: none;
  border: 1px solid var(--border);
  background: transparent;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.nav a:hover { color: var(--neon); border-color: var(--neon); }
.nav a.active { 
  color: #000;
  background: var(--neon); 
  border-color: var(--neon);
}

/* HERO SECTION - REFINED */
.hero-section {
    position: relative;
    width: 100%;
    max-width: 960px;
    height: 120px; 
    background-color: #000;
    margin: 10px auto 20px;
    border-bottom: 2px solid var(--neon);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}
.scanlines {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 2;
}
.glitch {
    font-family: "Press Start 2P", cursive;
    font-size: 32px; 
    color: #fff;
    text-transform: uppercase;
    animation: glitch-skew 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
}
@keyframes glitch-skew {
    0% { transform: skew(0deg); }
    20% { transform: skew(-2deg); }
    40% { transform: skew(2deg); }
    60% { transform: skew(-1deg); }
    80% { transform: skew(1deg); }
    100% { transform: skew(0deg); }
}
.hero-sub {
    font-family: "Press Start 2P", cursive;
    font-size: 10px;
    color: var(--neon);
    margin-top: 10px;
    letter-spacing: 2px;
}

/* PANELS - UNIFIED STYLE */
.panel{
    width:100%;
    max-width:960px;
    background:var(--panel);
    border: 1px solid var(--border);
    padding:25px;
    margin-bottom:20px;
}
h1{
    font-family: "Press Start 2P", cursive;
    font-size:18px;
    margin:0 0 20px;
    color: var(--neon);
    line-height: 1.4;
}

/* 2. STANDARDIZED INPUTS */
input, select{
    width:100%;
    padding:14px;
    margin:10px 0;
    background:#000; /* Uniform black background */
    color: var(--text-main);
    border: 1px solid var(--border); /* Subtle grey border */
    font-family: "VT323", monospace;
    font-size: 20px;
    outline: none;
    transition: all 0.2s ease;
}
input::placeholder { color: var(--text-dim); }
/* Only light up on focus */
input:focus, select:focus {
    border-color: var(--neon);
    box-shadow: 0 0 8px var(--neon-dim);
}
input:disabled, select:disabled{
    background: #1a1a1a;
    color: #444;
    border-color: #222;
    cursor: not-allowed;
}

/* BUTTONS */
button{
    padding:15px 18px;
    margin:8px;
    font-family: "Press Start 2P", cursive;
    font-size:12px;
    background: transparent;
    color: var(--neon);
    border: 2px solid var(--neon);
    cursor:pointer;
    transition: all 0.2s;
}
button:hover { background: var(--neon); color: #000; }
button:disabled{ opacity:0.3; cursor:not-allowed; background: transparent; color: var(--text-dim); border-color: var(--border); }

/* GRID & GROUPS */
.groups-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin-top:15px;}
.group{ border:1px solid var(--border); padding:15px; background: #000; }
.group h4{font-family: "Press Start 2P"; font-size:10px; margin-bottom:12px; color: #fff;}

.team-row{display:flex;justify-content:space-between;align-items:center;gap:6px; margin-bottom: 8px;}
.team-name{font-size:18px; flex:1; text-align:left;}

/* SELECTION BUTTONS */
.team-btn{
    font-family: inherit; /* Use VT323 for buttons too */
    font-size: 16px; 
    padding: 4px 8px;
    border: 1px solid var(--border);
    color: var(--text-dim);
    margin: 0 2px;
}
.team-btn:hover { border-color: var(--neon); color: var(--neon); background: transparent; }
.team-btn.selected-2{ background: var(--neon); color: #000; border-color: var(--neon); }
.team-btn.selected-3{ background: var(--text-main); color: #000; border-color: var(--text-main); }

/* CHECKBOXES */
.terms-container { display: flex; flex-direction: column; gap: 15px; margin: 15px 0; align-items: flex-start; }
.terms-container label { font-size: 18px; color: var(--text-dim); display: flex; align-items: center; gap: 10px; cursor: pointer; text-align: left; }
.terms-container a { color: var(--neon); text-decoration: underline; }
.terms-container input[type="checkbox"] { width: auto; margin: 0; transform: scale(1.5); border: 1px solid var(--border); }

/* SYSTEM MESSAGES */
.sys{margin:12px 0; font-size:18px; color: var(--text-dim); min-height: 24px;}
.sys.active { color: var(--neon); }
.sys.prominent { color: #fff; font-size: 20px; }

/* 4. FIXED SUMMARY POPUP */
.submit-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,0.95);
    display:none; align-items:center; justify-content:center; z-index:20;
}
.submit-box{
    max-width:600px; width:90%; 
    max-height: 85vh; /* Prevents cut-off on mobile */
    overflow-y: auto; /* Adds scroll if needed */
    border:2px solid var(--neon); 
    padding:30px; 
    background:#111;
}
.submit-box h2{ font-family: "Press Start 2P"; font-size:16px; color:var(--neon); margin-bottom:20px; border-bottom: 1px solid var(--border); padding-bottom: 15px;}
.summary-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Two columns for readability */
    gap: 10px;
    text-align: left;
    margin-bottom: 20px;
}
.summary-item { padding: 5px; border-bottom: 1px solid #222; font-size: 16px; color: #ccc; }
.summary-item strong { color: #fff; display: inline-block; width: 30px; }

/* MISC POPUPS */
.arcade-popup {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    background: #111; border: 2px solid var(--border); padding: 30px;
    z-index: 1000; width: 90%; max-width: 400px; text-align: center;
    box-shadow: 0 0 50px rgba(0,0,0,0.9); display: none;
    flex-direction: column; align-items: center;
}
.popup-msg { color: #fff; font-size: 18px; line-height: 1.6; margin-bottom: 20px; }

/* RANDOM PLAYER OVERLAY */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.98);display:none;align-items:center;justify-content:center;z-index:10;}
.modal{width:92%;max-width:960px;text-align:center;}
.top-player{border:2px solid var(--neon);padding:20px;font-family:"Press Start 2P"; font-size:20px;margin-bottom:20px; color: var(--neon);}
.player-box{ border:1px solid #333; padding:10px 4px; font-family: "Press Start 2P"; font-size:9px; color: #555;}
.player-box.active{ background: #333; color: #fff; transform: scale(1.1); }
.player-box.selected{ background: var(--neon); color: #000; border-color: var(--neon); }

</style>
</head> <body> 

<div class="nav" id="nav">
  <a href="index.html">HOME</a>
  <a href="predict.html" class="active">PLAY</a>
  <a href="scores.html">SCORES</a>
  <a href="rules.html">RULES</a>
</div>  

<div class="hero-section">
    <div class="scanlines"></div>
    <div class="hero-content">
        <h1 class="glitch" data-text="GOALSTORM!">GOALSTORM!</h1>
        <div class="hero-sub">WORLD CUP 2026</div>
    </div>
</div>

<div id="startupPopup" class="arcade-popup" style="display:flex;">
    <div class="popup-msg">
        THE SUBMISSION WINDOW WILL OPEN NEAR TO THE START OF THE TOURNAMENT.
        <br><br>
        <span style="color:var(--error);">NOTE: THIS IS A DEMO. REFRESHING THE PAGE WILL RESET YOUR PICKS.</span>
    </div>
    <button id="startupBtn">OK, I UNDERSTAND</button>
</div>

<div id="rulesPopup" class="arcade-popup">
    <div class="popup-msg" style="text-align: justify;">
        48 TEAMS. 12 GROUPS. TOP 2 QUALIFY AUTOMATICALLY. THE 8 BEST THIRD-PLACED TEAMS ALSO QUALIFY.
    </div>
    <button id="rulesBtn">CLOSE</button>
</div>

<div class="panel">
    <h1>PLAYER IDENTITY</h1>
    <input id="username" placeholder="USERNAME (REQUIRED)">
    <input id="email" placeholder="ENTER USERNAME FIRST" disabled>
    <input id="leaguePin" placeholder="LEAGUE PIN (OPTIONAL)" maxlength="4">

    <div class="terms-container">
        <label><input type="checkbox" id="privacyCheck"> <span>I AGREE TO <a href="#">PRIVACY POLICY</a></span></label>
        <label><input type="checkbox" id="termsCheck"> <span>I AGREE TO <a href="#">TERMS OF USE</a></span></label>
        <label><input type="checkbox" id="marketingCheck"> <span>SEND ME UPDATES</span></label>
    </div>
    <div class="sys" id="s1msg">AWAITING PLAYER IDENTITY...</div>
</div>  

<div class="panel">
    <h1>TOURNAMENT PREDICTIONS</h1>
    <button id="comboTrigger" style="width:100%; margin:12px 0;" disabled>CHOOSE SCORER COMBINATION</button>
    <select id="combo" style="display:none;" disabled>
        <option value="">SELECT SCORER DUO</option>
        <option>Messi & Ronaldo</option>
        <option>Neymar & Mbapp√©</option>
        <option>Lewandowski & Haaland</option>
        <option>Salah & Man√©</option>
        <option>Kane & Sterling</option>
        <option>Vin√≠cius & Pedri</option>
    </select>

    <input id="goals" placeholder="TOTAL GOALS (TIEBREAKER)" type="number" disabled>
    
    <div class="sys intro" style="margin-top: 20px;">INSTRUCTIONS:</div>
    <div class="sys prominent">SELECT 2ND PLACE (GREEN) & 3RD PLACE (WHITE)</div>
    <div class="groups-grid" id="groupsGrid"></div>
</div> 

<button id="lockBtn" disabled>LOCK PICKS & PLAY BONUS ROUND</button>

<div id="arcadePopup" class="arcade-popup">
    <div class="popup-msg" id="popupMsg"></div>
    <button id="popupBtn">OK</button>
</div>

<div class="overlay" id="overlay">
  <div class="modal">
    <div style="font-size:12px; color:#888; margin-bottom:10px;">BONUS PLAYER SELECTOR</div>
    <div class="top-player" id="topPlayer">???</div>
    <div class="subtitle">DO YOU WANT TO STICK OR TWIST?</div>
    <div class="actions">
      <button id="stickBtn">STICK</button>
      <button id="twistBtn">TWIST (2 LEFT)</button>
    </div>
    <div class="grid" id="grid"></div>
  </div>
</div>  

<div class="submit-overlay" id="submitOverlay">
  <div class="submit-box">
    <h2>PREDICTION SUMMARY</h2>
    <div style="margin-bottom: 20px; color: #888;">
        USER: <span id="sumUser" style="color:#fff"></span><br>
        EMAIL: <span id="sumEmail" style="color:#fff"></span>
    </div>
    
    <div style="background: #222; padding: 10px; margin-bottom: 20px; font-family:'Press Start 2P'; font-size:10px; color: var(--neon);">
        SCORERS: <span id="sumScorers" style="color:#fff"></span>
    </div>

    <div class="summary-grid" id="sumGrid">
        </div>

    <div class="hint" style="color:#666; margin-top:20px; font-size: 14px;">
        SCREENSHOT THIS PAGE FOR YOUR RECORDS.
    </div>
    <a href="index.html">EXIT / REFRESH</a>
  </div>
</div> 

<script>
'use strict';
/* ---------- POPUP LOGIC ---------- */
const startupPopup = document.getElementById('startupPopup');
document.getElementById('startupBtn').onclick = () => { startupPopup.style.display = 'none'; };

const rulesPopup = document.getElementById('rulesPopup');
document.getElementById('rulesLink')?.addEventListener('click', (e) => { e.preventDefault(); rulesPopup.style.display = 'flex'; });
document.getElementById('rulesBtn').onclick = () => { rulesPopup.style.display = 'none'; };

/* ---------- STATE VARIABLES ---------- */
const usernameInput=document.getElementById('username'),
emailInput=document.getElementById('email'),
privacyCheck=document.getElementById('privacyCheck'),
termsCheck=document.getElementById('termsCheck'),
comboSelect=document.getElementById('combo'),
comboTrigger=document.getElementById('comboTrigger'),
goalsInput=document.getElementById('goals'),
s1msg=document.getElementById('s1msg'),
lockBtn=document.getElementById('lockBtn');

/* ---------- FLOW CONTROLLER ---------- */
function updateTerminalState() {
    const isNameValid = usernameInput.value.trim().length > 2;
    const isEmailValid = emailInput.value.includes('@') && emailInput.value.includes('.');
    const areTermsChecked = privacyCheck.checked && termsCheck.checked;
    const isIdentityComplete = isNameValid && isEmailValid && areTermsChecked;

    if (!isNameValid) {
        emailInput.disabled = true;
        emailInput.placeholder = "ENTER USERNAME FIRST";
        s1msg.textContent = "AWAITING PLAYER IDENTITY...";
        s1msg.classList.remove('active');
    } else {
        emailInput.disabled = false;
        emailInput.placeholder = "EMAIL ADDRESS (REQUIRED)";
        if (!isEmailValid) {
            s1msg.textContent = "PLEASE ENTER VALID EMAIL...";
        } else if (!areTermsChecked) {
             s1msg.textContent = "ACCEPT PRIVACY & TERMS TO PROCEED";
             s1msg.classList.add('active');
        } else {
             s1msg.textContent = "IDENTITY CONFIRMED. PREDICTION UNLOCKED.";
             s1msg.style.color = "var(--neon)";
        }
    }

    if (!isIdentityComplete) {
        if(comboSelect.style.display !== 'block') {
             comboTrigger.disabled = true;
             comboTrigger.innerText = "COMPLETE IDENTITY FIRST";
        }
        comboSelect.disabled = true;
        goalsInput.disabled = true;
    } else {
        if(comboSelect.style.display === 'none'){
            comboTrigger.disabled = false;
            comboTrigger.innerText = "CHOOSE SCORER COMBINATION";
        } else {
             comboSelect.disabled = false;
        }
        const isComboSelected = comboSelect.value !== "";
        goalsInput.disabled = !isComboSelected;
    }

    // Lock Button Logic
    const isGoalsValid = goalsInput.value > 0;
    const isComboSelected = comboSelect.value !== "";
    const secondComplete = state.secondPicks.every(x => x !== null);
    const thirdComplete = state.thirdPicks.filter(x => x !== null).length === MAX_THIRD;
    
    lockBtn.disabled = !(isIdentityComplete && isComboSelected && isGoalsValid && secondComplete && thirdComplete);
}

[usernameInput, emailInput, comboSelect, goalsInput, privacyCheck, termsCheck].forEach(el => {
    el.addEventListener('input', updateTerminalState);
    el.addEventListener('change', updateTerminalState);
});

// Combo Trigger
comboTrigger.onclick = () => {
    comboTrigger.style.display = 'none';
    comboSelect.style.display = 'block';
    updateTerminalState();
};

/* ---------- GROUP PICKS LOGIC ---------- */
const GROUPS=[ 
["MEXICO üá≤üáΩ","S.AFRICA üáøüá¶","S.KOREA üá∞üá∑","DEN/IRL üá©üá∞"],
["CANADA üá®üá¶","ITALY üáÆüáπ","QATAR üá∂üá¶","SWITZ üá®üá≠"],
["BRAZIL üáßüá∑","MOROCCO üá≤üá¶","HAITI üá≠üáπ","SCOTLAND üè¥"],
["USA üá∫üá∏","PARAGUAY üáµüáæ","AUSTRALIA üá¶üá∫","TURKEY üáπüá∑"],
["GERMANY üá©üá™","CURA√áAO üá®üáº","IVORY C. üá®üáÆ","ECUADOR üá™üá®"],
["NETH. üá≥üá±","JAPAN üáØüáµ","POLAND üáµüá±","TUNISIA üáπüá≥"],
["BELGIUM üáßüá™","EGYPT üá™üá¨","IRAN üáÆüá∑","NZ üá≥üáø"],
["SPAIN üá™üá∏","C.VERDE üá®üáª","SAUDI üá∏üá¶","URUGUAY üá∫üáæ"],
["FRANCE üá´üá∑","SENEGAL üá∏üá≥","BOLIVIA üáßüá¥","NORWAY üá≥üá¥"],
["ARGENTINA üá¶üá∑","ALGERIA üá©üáø","AUSTRIA üá¶üáπ","JORDAN üáØüá¥"],
["PORTUGAL üáµüáπ","JAMAICA üáØüá≤","UZBEK üá∫üáø","COLOMBIA üá®üá¥"],
["ENGLAND üè¥","CROATIA üá≠üá∑","GHANA üá¨üá≠","PANAMA üáµüá¶"]
];
const letters="ABCDEFGHIJKL".split('');
const MAX_THIRD=8;
const state={ secondPicks:Array(GROUPS.length).fill(null), thirdPicks:Array(GROUPS.length).fill(null) };
const groupsGrid=document.getElementById('groupsGrid');

// Generic Popup
const popup = document.getElementById('arcadePopup');
const popupMsg = document.getElementById('popupMsg');
document.getElementById('popupBtn').onclick = () => { popup.style.display = 'none'; };

function showPopup(msg) {
    popupMsg.textContent = msg;
    popup.style.display = 'flex';
}

function renderGroups(){ 
    groupsGrid.innerHTML='';
    GROUPS.forEach((teams, i) => {
        const g=document.createElement('div'); g.className='group';
        g.innerHTML = `<h4>GROUP ${letters[i]}</h4>`;
        
        teams.forEach((team, idx) => {
            const row=document.createElement('div');
            row.className='team-row';
            
            const name=document.createElement('span');
            name.className='team-name';
            name.textContent = team;
            
            const btn2=document.createElement('button');
            btn2.className='team-btn';
            btn2.textContent='2nd';
            btn2.onclick = () => togglePick(i, idx, 'second', btn2);

            const btn3=document.createElement('button');
            btn3.className='team-btn';
            btn3.textContent='3rd';
            btn3.onclick = () => togglePick(i, idx, 'third', btn3);

            row.append(name, btn2, btn3);
            g.appendChild(row);
        });
        groupsGrid.appendChild(g);
    });
}

function togglePick(groupIndex, teamIndex, type, btn) {
    const parentRow = btn.parentElement;
    const buttons = parentRow.querySelectorAll('.team-btn');
    
    // Check conflicts
    if (type === 'second' && state.thirdPicks[groupIndex] === teamIndex) { showPopup("Team already selected as 3rd"); return; }
    if (type === 'third' && state.secondPicks[groupIndex] === teamIndex) { showPopup("Team already selected as 2nd"); return; }

    if (type === 'second') {
        const current = state.secondPicks[groupIndex];
        // Toggle off
        if (current === teamIndex) {
            state.secondPicks[groupIndex] = null;
            btn.classList.remove('selected-2');
        } else {
            // Remove highlight from other button in group
            const groupDiv = groupsGrid.children[groupIndex];
            const oldBtn = groupDiv.querySelector('.selected-2');
            if(oldBtn) oldBtn.classList.remove('selected-2');
            
            state.secondPicks[groupIndex] = teamIndex;
            btn.classList.add('selected-2');
        }
    } else {
        // Third place logic (Max 8)
        const current = state.thirdPicks[groupIndex];
        if (current === teamIndex) {
            state.thirdPicks[groupIndex] = null;
            btn.classList.remove('selected-3');
        } else {
            if (state.thirdPicks.filter(x=>x!==null).length >= MAX_THIRD) { showPopup("Max 8 Third-Place teams allowed"); return; }
            
            const groupDiv = groupsGrid.children[groupIndex];
            const oldBtn = groupDiv.querySelector('.selected-3');
            if(oldBtn) oldBtn.classList.remove('selected-3');

            state.thirdPicks[groupIndex] = teamIndex;
            btn.classList.add('selected-3');
        }
    }
    updateTerminalState();
}

/* ---------- BONUS ROUND ---------- */
const PLAYERS=['MESSI','RONALDO','MBAPP√â','HAALAND','SALAH','KANE','NEYMAR','VIN√çCIUS','PEDRI','GRIEZMANN','BELLINGHAM','LEWANDOWSKI','SON','OSIMHEN','SAKA','RASHFORD','FODEN','MUSIALA'];
let finalPlayer = null;
let twists = 2;

lockBtn.onclick = () => {
    document.getElementById('nav').style.display = 'none';
    document.getElementById('overlay').style.display = 'flex';
    initBonusGame();
};

function initBonusGame() {
    const grid = document.getElementById('grid');
    grid.innerHTML = '';
    PLAYERS.forEach(p => {
        const div = document.createElement('div');
        div.className = 'player-box';
        div.textContent = p;
        grid.appendChild(div);
    });
    spinWheel();
}

function spinWheel() {
    const boxes = document.querySelectorAll('.player-box');
    let spins = 0;
    const maxSpins = 20;
    const interval = setInterval(() => {
        boxes.forEach(b => b.classList.remove('active'));
        const r = Math.floor(Math.random() * boxes.length);
        boxes[r].classList.add('active');
        document.getElementById('topPlayer').textContent = boxes[r].textContent;
        spins++;
        if(spins > maxSpins) {
            clearInterval(interval);
            finalPlayer = boxes[r].textContent;
            boxes[r].classList.remove('active');
            boxes[r].classList.add('selected');
        }
    }, 100);
}

document.getElementById('twistBtn').onclick = () => {
    if(twists > 0) {
        twists--;
        document.getElementById('twistBtn').textContent = `TWIST (${twists} LEFT)`;
        document.querySelectorAll('.player-box').forEach(b => b.classList.remove('selected'));
        spinWheel();
        if(twists===0) document.getElementById('twistBtn').disabled = true;
    }
};

document.getElementById('stickBtn').onclick = showFinalSummary;

function showFinalSummary() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('sumUser').textContent = usernameInput.value;
    document.getElementById('sumEmail').textContent = emailInput.value;
    document.getElementById('sumScorers').textContent = comboSelect.value + " + " + finalPlayer;

    const grid = document.getElementById('sumGrid');
    GROUPS.forEach((teams, i) => {
        const div = document.createElement('div');
        div.className = 'summary-item';
        const p2 = state.secondPicks[i] !== null ? teams[state.secondPicks[i]] : '-';
        const p3 = state.thirdPicks[i] !== null ? teams[state.thirdPicks[i]] : '';
        
        let html = `<strong>${letters[i]}</strong> 2ND: ${p2}`;
        if(p3) html += ` <span style="color:#fff; opacity:0.5">| 3RD: ${p3}</span>`;
        
        div.innerHTML = html;
        grid.appendChild(div);
    });

    document.getElementById('submitOverlay').style.display = 'flex';
}

renderGroups();
</script> </body>
</html>
